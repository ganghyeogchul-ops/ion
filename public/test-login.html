<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .test-section {
            background: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #357abd;
        }
        .log {
            background: #000;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #444;
            background: #1a1a1a;
            color: white;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ë¡œê·¸ì¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>

    <div class="test-section">
        <h2>1. ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ í™•ì¸</h2>
        <button onclick="checkScripts()">ìŠ¤í¬ë¦½íŠ¸ í™•ì¸</button>
        <div id="script-log" class="log"></div>
    </div>

    <div class="test-section">
        <h2>2. í•¨ìˆ˜ ì¡´ì¬ í™•ì¸</h2>
        <button onclick="checkFunctions()">í•¨ìˆ˜ í™•ì¸</button>
        <div id="function-log" class="log"></div>
    </div>

    <div class="test-section">
        <h2>3. localStorage í…ŒìŠ¤íŠ¸</h2>
        <button onclick="testLocalStorage()">localStorage í…ŒìŠ¤íŠ¸</button>
        <div id="storage-log" class="log"></div>
    </div>

    <div class="test-section">
        <h2>4. ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h2>
        <input type="text" id="test-id" placeholder="ì•„ì´ë”” (admin)" value="admin">
        <input type="password" id="test-pw" placeholder="ë¹„ë°€ë²ˆí˜¸ (admin1234)" value="admin1234">
        <button onclick="testLogin()">ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</button>
        <div id="login-log" class="log"></div>
    </div>

    <div class="test-section">
        <h2>5. showAlert í…ŒìŠ¤íŠ¸</h2>
        <button onclick="testShowAlert('success')">ì„±ê³µ ì•Œë¦¼</button>
        <button onclick="testShowAlert('error')">ì—ëŸ¬ ì•Œë¦¼</button>
        <button onclick="testShowAlert('info')">ì •ë³´ ì•Œë¦¼</button>
    </div>

    <script src="/static/js/main.js"></script>
    <script>
        function log(elementId, message, type = 'info') {
            const logDiv = document.getElementById(elementId);
            const className = type;
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div class="${className}">[${time}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function checkScripts() {
            const logId = 'script-log';
            document.getElementById(logId).innerHTML = '';
            
            log(logId, '=== ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ë¡œë“œ í™•ì¸ ===', 'info');
            
            // main.jsì—ì„œ ë¡œë“œëœ ë³€ìˆ˜ í™•ì¸
            if (typeof API_BASE !== 'undefined') {
                log(logId, `âœ… API_BASE ì •ì˜ë¨: ${API_BASE}`, 'success');
            } else {
                log(logId, 'âŒ API_BASE ì •ì˜ë˜ì§€ ì•ŠìŒ', 'error');
            }

            // ì „ì—­ ìŠ¤í¬ë¦½íŠ¸ í™•ì¸
            const scripts = document.querySelectorAll('script[src]');
            log(logId, `ì´ ${scripts.length}ê°œì˜ ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œë¨`, 'info');
            scripts.forEach((script, index) => {
                log(logId, `  ${index + 1}. ${script.src}`, 'info');
            });
        }

        function checkFunctions() {
            const logId = 'function-log';
            document.getElementById(logId).innerHTML = '';
            
            log(logId, '=== í•„ìˆ˜ í•¨ìˆ˜ ì¡´ì¬ í™•ì¸ ===', 'info');
            
            const functions = [
                'showAlert',
                'isAdmin',
                'setAdminSession',
                'formatDate',
                'getRelativeTime'
            ];
            
            functions.forEach(funcName => {
                if (typeof window[funcName] === 'function') {
                    log(logId, `âœ… ${funcName}() í•¨ìˆ˜ ì¡´ì¬`, 'success');
                } else {
                    log(logId, `âŒ ${funcName}() í•¨ìˆ˜ ì—†ìŒ`, 'error');
                }
            });
        }

        function testLocalStorage() {
            const logId = 'storage-log';
            document.getElementById(logId).innerHTML = '';
            
            log(logId, '=== localStorage í…ŒìŠ¤íŠ¸ ===', 'info');
            
            try {
                // ì“°ê¸° í…ŒìŠ¤íŠ¸
                localStorage.setItem('test_key', 'test_value');
                log(logId, 'âœ… localStorage ì“°ê¸° ì„±ê³µ', 'success');
                
                // ì½ê¸° í…ŒìŠ¤íŠ¸
                const value = localStorage.getItem('test_key');
                if (value === 'test_value') {
                    log(logId, 'âœ… localStorage ì½ê¸° ì„±ê³µ', 'success');
                } else {
                    log(logId, 'âŒ localStorage ì½ê¸° ì‹¤íŒ¨', 'error');
                }
                
                // ì‚­ì œ í…ŒìŠ¤íŠ¸
                localStorage.removeItem('test_key');
                log(logId, 'âœ… localStorage ì‚­ì œ ì„±ê³µ', 'success');
                
                // ê´€ë¦¬ì ê³„ì • ì •ë³´ í™•ì¸
                const adminUser = localStorage.getItem('admin_username') || 'admin';
                const adminPass = localStorage.getItem('admin_password') || 'admin1234';
                log(logId, `ê´€ë¦¬ì ê³„ì •: ${adminUser} / ${adminPass}`, 'info');
                
                // í˜„ì¬ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
                const isLoggedIn = localStorage.getItem('admin_logged_in');
                log(logId, `í˜„ì¬ ë¡œê·¸ì¸ ìƒíƒœ: ${isLoggedIn || 'ì—†ìŒ'}`, 'info');
                
            } catch (error) {
                log(logId, `âŒ localStorage ì—ëŸ¬: ${error.message}`, 'error');
            }
        }

        function testLogin() {
            const logId = 'login-log';
            document.getElementById(logId).innerHTML = '';
            
            log(logId, '=== ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===', 'info');
            
            const adminId = document.getElementById('test-id').value.trim();
            const adminPassword = document.getElementById('test-pw').value.trim();
            
            log(logId, `ì…ë ¥ëœ ID: ${adminId}`, 'info');
            log(logId, `ì…ë ¥ëœ PW: ${'*'.repeat(adminPassword.length)}`, 'info');
            
            const storedUsername = localStorage.getItem('admin_username') || 'admin';
            const storedPassword = localStorage.getItem('admin_password') || 'admin1234';
            
            log(logId, `ì €ì¥ëœ ê³„ì •: ${storedUsername} / ${storedPassword}`, 'info');
            
            if (adminId === storedUsername && adminPassword === storedPassword) {
                log(logId, 'âœ… ì¸ì¦ ì„±ê³µ!', 'success');
                
                // ì„¸ì…˜ ì„¤ì •
                if (typeof setAdminSession === 'function') {
                    setAdminSession(true);
                    log(logId, 'âœ… ì„¸ì…˜ ì„¤ì • ì™„ë£Œ', 'success');
                } else {
                    localStorage.setItem('admin_logged_in', 'true');
                    log(logId, 'âš ï¸ setAdminSession í•¨ìˆ˜ ì—†ìŒ (ìˆ˜ë™ ì„¤ì •)', 'error');
                }
                
                // ì•Œë¦¼ í…ŒìŠ¤íŠ¸
                if (typeof showAlert === 'function') {
                    showAlert('ë¡œê·¸ì¸ ì„±ê³µ!', 'success');
                    log(logId, 'âœ… showAlert í˜¸ì¶œ ì™„ë£Œ', 'success');
                } else {
                    log(logId, 'âŒ showAlert í•¨ìˆ˜ ì—†ìŒ', 'error');
                }
                
                log(logId, '1ì´ˆ í›„ admin.htmlë¡œ ì´ë™ ì˜ˆì •...', 'info');
                
                setTimeout(() => {
                    log(logId, 'ğŸ”„ í˜ì´ì§€ ì´ë™ ì¤‘...', 'info');
                    // window.location.href = 'admin.html';
                }, 1000);
                
            } else {
                log(logId, 'âŒ ì¸ì¦ ì‹¤íŒ¨!', 'error');
                log(logId, `ID ì¼ì¹˜: ${adminId === storedUsername}`, 'info');
                log(logId, `PW ì¼ì¹˜: ${adminPassword === storedPassword}`, 'info');
            }
        }

        function testShowAlert(type) {
            if (typeof showAlert === 'function') {
                const messages = {
                    'success': 'ì„±ê³µ ë©”ì‹œì§€ì…ë‹ˆë‹¤!',
                    'error': 'ì—ëŸ¬ ë©”ì‹œì§€ì…ë‹ˆë‹¤!',
                    'info': 'ì •ë³´ ë©”ì‹œì§€ì…ë‹ˆë‹¤!'
                };
                showAlert(messages[type], type);
            } else {
                alert('showAlert í•¨ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.addEventListener('load', () => {
            console.log('í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            console.log('API_BASE:', typeof API_BASE !== 'undefined' ? API_BASE : 'ì •ì˜ì•ˆë¨');
            console.log('showAlert:', typeof showAlert);
            console.log('isAdmin:', typeof isAdmin);
            console.log('setAdminSession:', typeof setAdminSession);
        });
    </script>
</body>
</html>
